#!/bin/sh
#robzr/micro-pstree
get () { grep PPid: /proc/[0-9]*/status 2>/dev/null | sed -n "/\t$1$/s#^/proc/\([0-9]*\).*\$#\1#p" ; }
prn () {
 [ $1 = 0 ] && return
 echo --$1\ `tr \\\0 \  </proc/$1/cmdline`
 [ $1 = $$ ] && return
 lk=0
 for kid in `get $1 | sort -n` ; do 
  prn $lk | sed -n '/[0-9]/s/^/  |/p'
  lk=$kid
 done
 prn $lk | sed -n '/[0-9]/s/^/  L/p'
}
prn ${1:-1} | sed 's/L  /   /g'
